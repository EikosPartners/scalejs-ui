{"version":3,"sources":["../../../src/action/actions/route.js"],"names":[],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA,IAAM,WAAW,kBAAQ,UAAR,CAAmB,QAApC;AAAA,IACM,QAAQ,kBAAQ,MAAR,CAAe,KAD7B;AAAA,IAEM,SAAS,mBAAG,MAFlB;;AAIA,SAAS,YAAT,CAAsB,MAAtB,EAA8B,IAA9B,EAAoC;AAChC,QAAI,MAAM,MAAV;AACA,QAAI;AACA,cAAM,KAAK,KAAL,CACF,mBAAS,MAAT,CAAgB,KAAK,SAAL,CAAe,MAAf,CAAhB,EAAwC,IAAxC,CADE,CAAN;AAGH,KAJD,CAIE,OAAO,EAAP,EAAW;AACT,gBAAQ,KAAR,CAAc,uCAAd,EAAuD,EAAvD;AACH;AACD,WAAO,GAAP;AACH;;AAED,SAAS,KAAT,CAAe,OAAf,EAAwB;AACpB,QAAI,OAAO,OAAO,QAAQ,IAAR,IAAiB,QAAQ,KAAK,IAArC,CAAX;AAAA,QACI,SAAS,QAAQ,MAAR,GAAiB,aAAa,QAAQ,MAArB,EAA6B,IAA7B,CAAjB,GAAsD,SADnE;;AAGA,aAAS,OAAO,QAAQ,MAAf,CAAT,EAAiC,MAAjC;AACH;;AAED,mCAAgB,EAAC,YAAD,EAAhB","file":"route.js","sourcesContent":["import sandbox from 'scalejs.sandbox';\nimport mustache from 'mustache';\nimport ko from 'knockout';\n\nimport { registerActions } from '../actionModule';\n\nconst setRoute = sandbox.navigation.setRoute,\n      merge = sandbox.object.merge,\n      unwrap = ko.unwrap;\n\nfunction renderParams(params, data) {\n    let ret = params;\n    try {\n        ret = JSON.parse(\n            mustache.render(JSON.stringify(params), data)\n        );\n    } catch (ex) {\n        console.error('Unable to JSON parse/stringify params', ex);\n    }\n    return ret;\n}\n\nfunction route(options) {\n    let data = unwrap(options.data || (this && this.data)),\n        params = options.params ? renderParams(options.params, data) : undefined;\n\n    setRoute(unwrap(options.target), params);\n}\n\nregisterActions({route});"]}